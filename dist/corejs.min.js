Object.prototype.extend=function(){for(var t=this,e=0,n=arguments.length;n>e;e++){var i=arguments[e];Object.keys(i).forEach(function(e){t[e]=i[e]})}return this},Object.prototype.clone=function(){return Object.extend(this)},Element.prototype.addClass=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t].trim();this.className?this.className.match(e)||(this.className+=" "+e):this.className=e}return this},Element.prototype.clearClass=function(){return this.className="",this},Element.prototype.removeClass=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t].trim();this.className.match(e)&&(this.className=this.className.replace(e,"").replace(/\s\s/g," ").trim())}return this},Element.prototype.hasClass=function(t){return this.className.match(t)},Element.prototype.toggleClass=function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t),this},Element.prototype.addListener=function(t,e){this._listeners=this._listeners||[],this._listeners.push({action:t,callback:e}),this.addEventListener?this.addEventListener(t,e):this.attachEvent("on"+t,e)},Element.prototype.removeListener=function(t,e){this.removeEventListener?this.removeEventListener(t,e):this.detachEvent("on"+t,e)},Element.prototype.resetListeners=function(){this._listeners&&this._listeners.forEach(function(t){this.removeListener(t.action,t.callback)},this)},Event.prototype.getTarget=function(){var t=this||window.event;return t.target||t.srcElement},Element.prototype.setInnerText=function(t){return this.textContent=t,this.innerText=t,this};var Collection=function(){var t=function(t,e,n){var i=[];t.forEach(function(n,r){i.push({a1:t[r],a2:e[r]})}),i.sort(function(t,e){return n?t.a1>e.a1?-1:t.a1===e.a1?0:1:t.a1<e.a1?-1:t.a1===e.a1?0:1}),i.forEach(function(n,i){t[i]=n.a1,e[i]=n.a2})},e=function(t,e,n){var i=t.splice(n,1,t[e]);t[e]=i[0]},n={VERSUS:{ascending:0,descending:1},initValues:function(){this.items=[],this.keys=[],this.__counterId=0},size:function(){return this.items.length},isEmpty:function(){return 0===this.size()},add:function(t,e){var n="undefined"==typeof e?this.__counterId++:e;return this.keys.push(n),this.items.push(t),n},sortByItem:function(e){t(this.items,this.keys,e)},sortByKey:function(e){t(this.keys,this.items,e)},sortBy:function(e,n){var i=[],r=[];this.forEach(function(t){i.push(t[e]),r.push(t[e])}),t(i,this.keys,n),t(r,this.items,n)},newItem:function(t){var e=new this.ClassType;return this.add(e,t),e},get:function(t){return this.items[this.keys.indexOf(t)]},getAt:function(t){return this.items[t]},getKeyAt:function(t){return this.keys[t]},set:function(t,e){var n=this.keys.indexOf(t);return this.items[n]=e,n},setAt:function(t,e){return this.items[t]=e,this.keys[t]},setKey:function(t,e){var n=this.keys.indexOf(t);return this.keys[n]=e,n},getLast:function(t){return this.items[this.keys.lastIndexOf(t)]},swap:function(t,n){e(this.items,t,n),e(this.keys,t,n)},getCollection:function(t,e){var n=Collection();return this.forEach(function(i,r){i[t]===e&&n.add(i,r)}),n},indexOf:function(t){return this.items.indexOf(t)},addCollection:function(t){t.forEach(function(t,e){this.add(t,e)},this)},remove:function(t){var e,n=0;do n=this.keys.indexOf(t),-1!==n&&(this.keys.splice(n,1),e=this.items.splice(n,1));while(-1!==n);return e[0]||null},removeAt:function(t){return this.keys.splice(t,1),this.items.splice(t,1)[0]},removeItem:function(t){var e=this.indexOf(t),n=this.keys[e];return this.remove(n)},filter:function(t){var e=Collection();return this.forEach(function(n,i){"undefined"!=typeof t&&i!==t||e.add(n,t)}),e},clone:function(){return this.filter()},forEach:function(t,e){for(var n=0;n<this.items.length;n++)t.call(e||this,this.items[n],this.keys[n],parseInt(n,10))},clear:function(){this.items=[],this.keys=[]},toArray:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},toJSON:function(){var t={};return this.forEach(function(e,n){t[n]=e}),t}};return function(t){var e={};return e.extend(n),e.initValues(),Array.isArray(t)?t.forEach(function(t){e.add(t)}):e.ClassType=t,e}}(),Need=function(){var t={WAIT:0,DONE:1,FAIL:2},e=Collection(),n=function(t,e,n){t.returnData[e]=n,t.status=e,t.collection.filter(e).forEach(function(e){e(n,t.id)})},i=function(t,e,n){t.status===e?n(t.returnData[e],t.id):t.collection.add(n,e)},r=function(){var e={},r={returnData:[],status:t.WAIT,id:-1,collection:Collection()};return e.resolve=function(e){r.status===t.WAIT&&n(r,t.DONE,e)},e.fail=function(e){n(r,t.FAIL,e)},e.then=function(e){i(r,t.DONE,e)},e.onFail=function(e){i(r,t.FAIL,e)},e.status=function(){return r.status},e.setId=function(t){r.id=t},e},s=function(e){var n=e.errors;return e.status===t.DONE&&(n=e.args.slice(0)),n},o=function(e,n,i){i.status===e?n.apply(null,s(i)):e===t.DONE?i.done.push(n):i.fail=n},a=function(e){var n={},i={done:[],fail:function(){},args:[],errors:[],count:0,counter:0,status:t.WAIT,collection:Collection()};return n.add=function(t){return t.setId(i.counter++),i.collection.add(t),t.then(function(t,e){n.itemOnDone(t,e)}),t.onFail(function(t){n.itemOnFail(t)}),this},n.itemOnDone=function(e,n){i.count+=1,i.args[n]=e,i.count===i.collection.size()&&(i.status=t.DONE,i.done.forEach(function(t){t.apply(this,s(i))}))},n.itemOnFail=function(e){i.errors.push(e),i.status=t.FAIL,i.fail.apply(this,s(i))},n.then=function(e){o(t.DONE,e,i)},n.onFail=function(e){o(t.FAIL,e,i)},n.get=function(t){return i.collection.get(t)},n.status=function(){return i.status},e.forEach(function(t){n.add(t)}),n},c=function(t,n){var i={},r={needs:Need([])};e.get(t)||e.add(Need(),t);var s=function(t){if(e.get(t))r.needs.add(e.get(t));else{var n=Need();r.needs.add(n),e.add(n,t)}},o=n(s),a=e.get(t);return o.__namespace=t,a.__callback=o,a.resolve(o),r.needs.then(function(){for(var i={},r=0;r<arguments.length;r++)i[arguments[r].__namespace]=arguments[r];e.get(t).__callback=n(function(t){return i[t]()}),e.get(t).__callback()}),i.status=function(){return r.needs.status()},i},u=function(t){return e.get(t).__callback()};return function(t,e){return void 0===t?r():Array.isArray(t)?a(t):1===arguments.length?u(t):c(t,e)}}();!function(t){t.send=function(t,i,r){r=r||{};var s=Need(),o=n();return o.open(t,i,1),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.overrideMimeType&&o.overrideMimeType(r.overrideMimeType),o.onreadystatechange=function(){200===o.status&&4===o.readyState?s.resolve(e(o)):200!==o.status&&4===o.readyState&&s.fail(o)},o.send(),s},t.get=function(e,n){return t.send("GET",e,n||{})},t.post=function(e,n){return t.send("POST",e,n||{})},t.put=function(e,n){return t.send("PUT",e,n||{})},t["delete"]=function(e,n){return t.send("DELETE",e,n||{})};var e=function(){var t={toJSON:function(){return JSON.parse(this.response.responseText)},getResponseText:function(){return this.response.responseText}};return function(e){return{response:e}.extend(t)}}(),n=function(){return window.ActiveXObject?new ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest}}(navigator);var Component=function(){function t(t,e,n){var i=t.trim().split(":"),r=i[0].split(","),s=i[1];r.forEach(function(t){e.addListener(t,function(t){n[s].call(n,t)})})}var e=[],n=function(t){var e=document.implementation.createHTMLDocument("");return e.body.innerHTML=t,e.body.childNodes[0]},i=function(t,e,n){n.items.add(e,t)},r=function(e,n,r){if(e.getAttribute){var s=e.getAttribute(r);s&&("data-on"===r&&t(s,e,n),"data-item"===r&&i(s,e,n))}},s=function(t,n){if(t.tagName){var i=t.tagName.match(/COREJS:(.*)/);if(i){var r=e.filter(function(t){return t.name.toUpperCase()===i[1]})[0],s=c(r.template,r.style).extend(r.controller);s.createIn(t,"before"),s.node.id=t.id,n.items.add(s,t.getAttribute("data-id")),t.parentNode.removeChild(t)}}},o=function(t,e){r(t,e,"data-on"),r(t,e,"data-item");var n=Array.prototype.slice.call(t.childNodes);n.forEach(function(t){o(t,e)}),s(t,e)},a=function(t){var e=function(){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet}();t.split("}").forEach(function(t){var n=t.concat("}").match(/(.*)\{(.*)\}/);n&&e.addRule(n[1],n[2])})},c=function(t,e){var i=n(t),r={items:Collection(),template:t,style:e,node:i};return r.createIn=function(t,n){n?("before"===n&&t.parentNode.insertBefore(i,t),"after"===n&&t.parentNode.insertBefore(i,t.nextSibling)):t.appendChild(i),i&&o(i,r),e&&a(e)},r.get=function(t){return r.items.get(t)},r};return c.register=function(t,n,i,r){n.template=i,n.style=r,e.push({name:t,controller:n,template:i,style:r})},c}();