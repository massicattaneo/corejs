/**
 * corejs - Javascript Framework
 * @version v1.1.0
 * @link https://github.com/massicattaneo/corejs#readme
 * @license ISC
 * @author Max Cattaneo <massi.cattaneo.it@gmail.com>
 */
function cjs(){}!function(t){function e(t){return t&&-1===t.toString().indexOf("native code")}t.create=function(t){return n(new cjs,t||{})},t.extend=function(t){return{create:function(e){return n(new t,e||{})},CollectionOf:function(e){return{create:function(r){var i=n(new t,o(e));return n(new i,r||{})}}}}};var n=function(t,e){var n=a(e.constructor,t.constructor);n.prototype=t;for(var r in e)n.prototype[r]=a(e[r],t[r]);return n};t.CollectionOf=function(t){return{create:function(e){return n(o(t),e||{})}}};var r=function(t,e,n){var r=[];t.each(function(n){r.push({a1:t[n],a2:e[n]})}),r.sort(function(t,e){return n?t.a1>e.a1?-1:t.a1===e.a1?0:1:t.a1<e.a1?-1:t.a1===e.a1?0:1}),r.each(function(n,r){t[n]=r.a1,e[n]=r.a2})},i=function(t,e,n){var r=t.splice(n,1,t[e]);t[e]=r[0]},o=function(t){var e={VERSUS:{ascending:0,descending:1},constructor:function(t){this.initValues(),"array"==typeof t&&t.each(function(t,e){e&&this.add(e)},this)},initValues:function(){this.items=[],this.keys=[],this.__counterId=0},size:function(){return this.items.length},isEmpty:function(){return 0===this.size()},add:function(t,e){var n="undefined"==typeof e?this.__counterId++:e;return this.keys.push(n),this.items.push(t),n},sortByItem:function(t){r(this.items,this.keys,t)},sortByKey:function(t){r(this.keys,this.items,t)},sortBy:function(t,e){var n=[],i=[];this.each(function(e,r,o){n.push(o[t]),i.push(o[t])}),r(n,this.keys,e),r(i,this.items,e)},newItem:function(e){var n=new t;return this.add(n,e),n},get:function(t){return this.items[this.keys.indexOf(t)]},getAt:function(t){return this.items[t]},getKeyAt:function(t){return this.keys[t]},set:function(t,e){var n=this.keys.indexOf(t);return this.items[n]=e,n},setAt:function(t,e){return this.items[t]=e,this.keys[t]},setKey:function(t,e){var n=this.keys.indexOf(t);return this.keys[n]=e,n},getLast:function(t){return this.items[this.keys.lastIndexOf(t)]},swap:function(t,e){i(this.items,t,e),i(this.keys,t,e)},getCollection:function(e,n){var r=new(cjs.CollectionOf(t).create());return this.each(function(t,i,o){o[e]===n&&r.add(o,i)}),r},indexOf:function(t){return this.items.indexOf(t)},addCollection:function(t){var e=this;t.each(function(t,n,r){e.add(r,n)})},remove:function(t){var e,n=0;do n=this.keys.indexOf(t),-1!==n&&(this.keys.splice(n,1),e=this.items.splice(n,1));while(-1!==n);return e[0]||null},removeAt:function(t){return this.keys.splice(t,1),this.items.splice(t,1)[0]},removeItem:function(t){var e=this.indexOf(t),n=this.keys[e];return this.remove(n)},filter:function(e,n){var r=new(cjs.CollectionOf(t).create());return this.forEach(function(t,i,o){e.call(n||this,t,i,o)&&r.add(t,i)}),r},filterByKey:function(e){var n=new(cjs.CollectionOf(t).create());return this.forEach(function(t,r,i){"undefined"!=typeof e&&r!==e||n.add(t,e)}),n},clone:function(){return this.filter()},forEach:function(t,e){for(var n=0;n<this.items.length;n++)t.call(e||this,this.items[n],this.keys[n],parseInt(n,10))},each:function(t,e){for(var n=0;n<this.items.length;n++)t.call(e||this,parseInt(n,10),this.keys[n],this.items[n])},clear:function(){this.items=[],this.keys=[]},toArray:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},keysToArray:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},toJSON:function(){var t={};return this.forEach(function(e,n){t[n]=e}),t}};return e},a=function(t,n){return"function"==typeof t?function(){return this.parent=n,e(t)?t.apply(this,arguments):n.apply(this,arguments)}:t};t.Collection=function(t){return new(cjs.CollectionOf(Object).create())(t)}}(cjs),function(){cjs.Array={},cjs.Array.clone=function(t){return t.slice(0)},cjs.Array.createWithIndexes=function(t,e){var n=[];e=e||0;for(var r=0;t-e>=r;r++)n[r]=r+e;return n}}(),String.prototype.replaceAt=function(t,e,n){return this.substr(0,t)+n+this.substr(t+e)},String.prototype.insertAt=function(t,e){return this.substr(0,t)+e+this.substr(t)},String.prototype.removeAt=function(t,e){return e="undefined"==typeof e?1:e,this.substr(0,t)+this.substr(t+e)},String.prototype.padLeft=function(t,e){return 0===t?"":(Array(t+1).join(e)+this).slice(-t)},String.prototype.padRight=function(t,e){return 0===t?"":(this+Array(t+1).join(e)).slice(0,t)},String.prototype.removeHTMLTags=function(){return this.replace(/<\/?[^>]+(>|$)/g,"")},String.prototype.startsWith=function(t){return this.substr(0,t.length)===t},String.prototype.highlightWord=function(t,e,n){e=e||"strong";var r=new RegExp("("+t+")","gi");return strClass=n?' class="'+n+'"':"",this.replace(r,"<"+e+strClass+">$1</"+e+">")},String.prototype.isTime=function(){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(this)},String.prototype.isDate=function(){var t=-1!==this.indexOf("-")?"-":"/",e=this.split(t);if(e.join("-").length<10)return!1;var n=new Date(e.join("-"));return/Invalid|NaN/.test(n.toString())?!1:n.getDate()!==parseInt(e[2],10)?!1:n.getFullYear()===parseInt(e[0],10)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toString().toLowerCase()},String.prototype.toDate=function(){if(!isNaN(this))return new Date(parseInt(this));var t=this.split(this.match(/\D/));return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10))},function(t){t.toCamelCase=function(){var t=this;if(t.match(/\s|-|_/)){t=t.toLowerCase();var e=t.match(/([^\s|_|-]*)/g);return e.reduce(function(t,e){return t+e.capitalize()})}return t.match(/[a-z]/)?t:t.toLowerCase()};var e=function(t,n){if(t.match(/\s/)){var r=t.match(/([^\s]*)/g);return r.reduce(function(t,e){return t.toLowerCase()+(e?n+e.toLowerCase():"")})}return t.match(new RegExp(n))?t.toLowerCase():t.match(/_/)?t.toLowerCase().replace(/_/g,"-"):t.match(/-/)?t.toLowerCase().replace(/-/g,"_"):e(t.replace(/([A-Z])/g," $1").replace(/^./,function(t){return t.toUpperCase()}),n)};t.toKebabCase=function(){return e(this,"-")},t.toSnakeCase=function(){return e(this,"_")}}(String.prototype),function(){cjs.Object={},cjs.Object.extend=function(){for(var t=arguments[0],e=1,n=arguments.length;n>e;e++){var r=arguments[e]||{};Object.keys(r).forEach(function(e){t[e]=r[e]})}return t},cjs.Object.clone=function(t){return cjs.Object.extend({},t)},cjs.Object.toXML=function(t){function e(t,e){var n=document.createElement(t);return n.innerText=e,n}function n(t,n,i){for(var o=0;o<t.length;o++)"object"!=typeof t[o]?i.appendChild(e(n,t[o])):i.appendChild(r(t[o],n))}function r(t,i){var o=document.createElement(i);for(var a in t)t.hasOwnProperty(a)&&(t[a]instanceof Array?n(t[a],a,o):"object"!=typeof t[a]?o.appendChild(e(a,t[a])):o.appendChild(r(t[a],a)));return o}return r(t,"Model")}}(cjs),function(){function t(){for(var t=0;t<arguments.length;t++){var e=arguments[t].trim();this.className?this.className.match(e)||(this.className+=" "+e):this.className=e}}function e(t){var e=this;Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function n(){"object"==typeof arguments[0]?e.apply(this,arguments):t.apply(this,arguments)}function r(){this.className=""}function i(){for(var t=0;t<arguments.length;t++){var e=arguments[t].trim();this.className.match(e)&&(this.className=this.className.replace(e,"").replace(/\s\s/g," ").trim())}}function o(t){return null!==this.className.match(t)}function a(t){o.call(this,t)?i.call(this,t):n.call(this,t)}function c(t,e){-1!==["tapstart","tap","tapmove","tapend","taphold"].indexOf(t)?O[t].call(this,e):(this._listeners=this._listeners||[],this._listeners.push({action:t,callback:e}),this.addEventListener?this.addEventListener(t,e):this.attachEvent("on"+t,e))}function s(t,e){this.removeEventListener?this.removeEventListener(t,e):this.detachEvent("on"+t,e)}function u(t,e){var n=this,r=function(){e(),s.call(n,t,r)};c.call(n,t,r)}function f(){this._listeners&&(this._listeners.forEach(function(t){s.call(this,t.action,t.callback)},this),this._listeners.length=0)}function h(){for(var t=this.firstChild;t;)this.removeChild(t),t=this.firstChild;return this}function l(t){var e=t||window.event;return e.target||e.srcElement}function d(t,e){if(document.action){var n=document.createEventObject();return n.data=e,this.fireEvent("on"+t,n)}var r=document.createEvent("HTMLEvents");return r.initEvent(t,!0,!0),r.data=e,!this.dispatchEvent(r)}function p(t){return"checkbox"===this.getAttribute("type")?this.checked=t:-1!==["text","email","tel"].indexOf(this.getAttribute("type"))?this.value=t:(this.textContent=t,this.innerText=t),this}function g(){return"checkbox"===this.getAttribute("type")?this.checked:void 0!==this.value?this.value:this.innerText}function m(t){var e=this;return e&&e.getAttribute?e.getAttribute(t):null}function v(t,e){var n=this;void 0===e?n.removeAttribute(t):n.setAttribute(t,e)}function y(t,e){e=e||{time:500,times:1};var n="animationend animationend webkitAnimationEnd oanimationend MSAnimationEnd".split(" "),r=cjs.Need(),i=this,o=function(){i.style.animation="",r.resolve()};return n.forEach(function(t){c.call(i,t,o)}),r.done(function(){n.forEach(function(t){s.call(i,t,o)})}),this.style.animation=t+" "+e.time+"ms "+(e.times||1)+" "+(e.ease||"linear"),r}function b(t){return this.appendChild(t.get())}function j(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}function w(t){var e=t.textContent||t.innerText,n=isNaN(e)?e:parseFloat(e);return n}function x(t){for(var e={},n=0;n<t.length;n++){var r=t[n],i=r.tagName.toCamelCase();!e[i]||e[i]instanceof Array||(e[i]=[e[i]]);var o=x(r.children)||w(r);e[i]instanceof Array?e[i].push(o):e[i]=o}return T(e)?null:e}function N(){return x(this.children)}function E(t){var e={};return[n,r,i,o,a,c,u,s,f,p,g,m,v,y,b,d,N,h].forEach(function(n){e[n.name]=function(){var r=n.apply(t,arguments);return void 0===r?e:r}}),e.get=function(){return t},e.attributes=function(){return t.attributes},e.getTagName=function(){return t.tagName},e.children=function(){if(!t||!t.childNodes)return[];var e=Array.prototype.slice.call(t.childNodes);return e.map(function(t){return E(t)})},cjs.Object.extend(e,_),e}var O={};!function(t){function e(t,e,n,r,i){var o=r.type;r.type=e,n.call(t,r,i),r.type=o}var n=navigator.userAgent.toLowerCase(),r=n.indexOf("chrome")>-1&&(n.indexOf("windows")>-1||n.indexOf("macintosh")>-1||n.indexOf("linux")>-1)&&n.indexOf("mobile")<0&&n.indexOf("android")<0,i={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,touch_capable:"ontouchstart"in window&&!r,tapevent:"ontouchstart"in window&&!r?"tap":"click",startevent:"ontouchstart"in window&&!r?"touchstart":"mousedown",endevent:"ontouchstart"in window&&!r?"touchend":"mouseup",moveevent:"ontouchstart"in window&&!r?"touchmove":"mousemove",scrollevent:"ontouchstart"in window&&!r?"touchmove":"scroll",hold_timer:null};t.tapstart=function(t){var n=this;c.call(this,i.startevent,function(r){if(r.which&&1!==r.which)return!1;var o={position:{x:i.touch_capable?r.touches[0].screenX:r.screenX,y:i.touch_capable?r.touches[0].screenY:r.screenY},time:Date.now(),target:r.target};return e(n,"tapstart",t,r,o),!0})},t.tap=function(t){var n,r,o=this,a=!1,s=null,u={x:0,y:0};c.call(this,i.startevent,function(t){return t.which&&1!==t.which?!1:(a=!0,u.x=t.targetTouches?t.targetTouches[0].pageX:t.pageX,u.y=t.targetTouches?t.targetTouches[0].pageY:t.pageY,n=Date.now(),s=t.target,r=t.targetTouches?t.targetTouches:[t],!0)}),c.call(this,i.endevent,function(c){var f=c.targetTouches?c.changedTouches[0].pageX:c.pageX,h=c.targetTouches?c.changedTouches[0].pageY:c.pageY,l=u.x-f,d=u.y-h;if(s==c.target&&a&&Date.now()-n<i.taphold_threshold&&(u.x==f&&u.y==h||l>=-i.tap_pixel_range&&l<=i.tap_pixel_range&&d>=-i.tap_pixel_range&&d<=i.tap_pixel_range)){for(var p=[],g=0;g<r.length;g++){var m={position:{x:i.touch_capable?c.changedTouches[g].screenX:c.screenX,y:i.touch_capable?c.changedTouches[g].screenY:c.screenY},time:Date.now(),target:c.target};p.push(m)}e(o,"tap",t,c,p)}})},t.tapmove=function(t){var n=this;c.call(this,i.moveevent,function(r){var o={position:{x:i.touch_capable?r.touches[0].screenX:r.screenX,y:i.touch_capable?r.touches[0].screenY:r.screenY},time:Date.now(),target:r.target};return e(n,"tapmove",t,r,o),!0})},t.tapend=function(t){var n=this;c.call(this,i.endevent,function(r){var o={position:{x:i.touch_capable?r.changedTouches[0].screenX:r.screenX,y:i.touch_capable?r.changedTouches[0].screenY:r.screenY},time:Date.now(),target:r.target};return e(n,"tapend",t,r,o),!0})},t.taphold=function(t){var n,r=this,o=(ret(r),{x:0,y:0}),a=0,s=0;c.call(this,i.startevent,function(c){if(c.which&&1!==c.which)return!1;n=c.target;var u=Date.now(),f={x:i.touch_capable?c.touches[0].screenX:c.screenX,y:i.touch_capable?c.touches[0].screenY:c.screenY},h={x:i.touch_capable?c.touches[0].pageX-c.touches[0].target.offsetLeft:c.offsetX,y:i.touch_capable?c.touches[0].pageY-c.touches[0].target.offsetTop:c.offsetY};return o.x=c.targetTouches?c.targetTouches[0].pageX:c.pageX,o.y=c.targetTouches?c.targetTouches[0].pageY:c.pageY,a=o.x,s=o.y,i.hold_timer=window.setTimeout(function(){var l=o.x-a,d=o.y-s;if(c.target==n&&(o.x==a&&o.y==s||l>=-i.tap_pixel_range&&l<=i.tap_pixel_range&&d>=-i.tap_pixel_range&&d<=i.tap_pixel_range)){var p=Date.now(),g={x:i.touch_capable?c.touches[0].screenX:c.screenX,y:i.touch_capable?c.touches[0].screenY:c.screenY},m=p-u,v={startTime:u,endTime:p,startPosition:f,startOffset:h,endPosition:g,duration:m,target:c.target};e(r,"taphold",t,c,v)}},i.taphold_threshold),!0}),c.call(this,i.endevent,function(){window.clearTimeout(i.hold_timer)}),c.call(this,i.moveevent,function(t){a=t.targetTouches?t.targetTouches[0].pageX:t.pageX,s=t.targetTouches?t.targetTouches[0].pageY:t.pageY})}}(O);var T=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},_={};cjs.Node=function(t){if("object"==typeof t)return E(l(t));if(-1===t.indexOf("#"))return E(j(t));var e=document.getElementById(t.replace("#",""));return E(e)},cjs.Node.extend=function(t){cjs.Object.extend(_,t)}}(),function(){var t=["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],e=["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"];cjs.Date=cjs.create({constructor:function(t){this._date=t?new Date(t):new Date},getMonthName:function(){return cjs.Date.getMothName(this._date.getMonth())},getShortMonthName:function(){return e[this._date.getMonth()].substr(0,3)},getDayName:function(){return cjs.Date.getDayName(this._date.getDay())},getShortDayName:function(){return t[this._date.getDay()].substr(0,3)},format:function(t){return t=t.replace(/dddd/g,this.getDayName()),t=t.replace(/Dddd/g,this.getDayName().capitalize()),t=t.replace(/ddd/g,this.getShortDayName()),t=t.replace(/Ddd/g,this.getShortDayName().capitalize()),t=t.replace(/dd/g,this._date.getDate().toString().padLeft(2,0)),t=t.replace(/mmmm/g,this.getMonthName()),t=t.replace(/Mmmm/g,this.getMonthName().capitalize()),t=t.replace(/mmm/g,this.getShortMonthName()),t=t.replace(/Mmm/g,this.getShortMonthName().capitalize()),t=t.replace(/mm/g,(this._date.getMonth()+1).toString().padLeft(2,0)),t=t.replace(/yyyy/g,this._date.getFullYear().toString()),t=t.replace(/yy/g,this._date.getFullYear().toString().substr(2,2)),t=t.replace(/TT/g,this._date.getHours().toString().padLeft(2,0)),t=t.replace(/tt/g,this._date.getMinutes().toString().padLeft(2,0))}}),cjs.Date.getDayName=function(e){return t[e]},cjs.Date.getMothName=function(t){return e[t]},cjs.Date.isToday=function(t){var e=new Date(t),n=new Date;return e.getFullYear()!==n.getFullYear()?!1:e.getMonth()!==n.getMonth()?!1:e.getDate()===n.getDate()}}(),function(){cjs.Currency=cjs.create({constructor:function(t){this._original=void 0!==t?t:0},format:function(t){var e=parseInt(this._original,10),n=this._original.toString().split(".")[1]||[];t=t.replace(/i/g,e);var r=-1;return t=t.split("").map(function(t){return"f"===t&&r++,"f"===t?n[r]||0:t}).join(""),t=t.replace(/s/g,"€")}})}(),cjs.Need=function(){function t(t,e,r){t.count+=1,t.args[r]=e,t.count===t.collection.length&&(t.status=n.DONE,t.done.forEach(function(e){e.apply(this,a(t))}))}function e(t,e){t.errors.push(e),t.status=n.FAIL,t.reject.apply(this,a(t))}var n={WAIT:0,DONE:1,FAIL:2},r=function(t,e,n){t.returnData[e]=n,t.status=e,t.collection.filter(function(t){return t.status===e}).forEach(function(e){e.action(n,t.id)})},i=function(t,e,n){t.status===e?n(t.returnData[e],t.id):t.collection.push({action:n,status:e})},o=function(){var t={},e={returnData:[],status:n.WAIT,id:-1,collection:[]};return t.resolve=function(i){return e.status===n.WAIT&&r(e,n.DONE,i),t},t.reject=function(i){return r(e,n.FAIL,i),t},t.done=function(r){return i(e,n.DONE,r),t},t.fail=function(r){return i(e,n.FAIL,r),t},t.status=function(){return e.status},t.setId=function(t){e.id=t},t},a=function(t){var e=t.errors;return t.status===n.DONE&&(e=t.args.slice(0)),e},c=function(t,e,r){r.status===t?e.apply(null,a(r)):t===n.DONE?r.done.push(e):r.reject=e},s=function(r){var i={},o={done:[],reject:function(){},args:[],errors:[],count:0,counter:0,status:n.WAIT,collection:[],id:-1};return i.add=function(n){return n.setId(o.counter++),o.collection.push(n),n.done(function(e,n){t.call(this,o,e,n)}),n.fail(function(t){e.call(this,o,t)}),this},i.done=function(t){return c(n.DONE,t,o),i},i.fail=function(t){return c(n.FAIL,t,o),i},i.get=function(t){return o.collection[t]},i.status=function(){return o.status},i.size=function(){return o.collection.length},i.setId=function(t){o.id=t},r.forEach(function(t){i.add(t)}),i},u=function(t){function e(){t=[],c=-1,r&&r.apply(a,arguments),i.resolve(),r=void 0}function n(r){if(c+=1,t.length>c){var i=t[c](a,r);i&&i.done?i.done(n).fail(e):e()}else e()}var r,i,a={},c=-1;return a.start=function(t){return i=o(),n(t),i},a.push=function(e){return Array.prototype.push.apply(t,arguments),a},a.pushAndRun=function(){return a.isRunning()?a.push.apply(a,arguments):(a.push.apply(a,arguments),a.start()),a},a.reject=function(){t=[],c=-1,r&&r.apply(a,arguments),i.reject(),r=void 0},a.length=function(){return t.length},a.isRunning=function(){return-1!==c},a.concat=function(e){return t=t.concat(e),a},a.always=function(t){return r=t,a},a.insert=function(e,n){return t.splice(c+1+(n||0),0,e),a},a};return function(t){if(void 0===t)return o();if(Array.isArray(t)){if("object"==typeof t[0]||void 0===t[0])return s(t);if("function"==typeof t[0])return u(t)}}}(),function(){function t(){var t=[],e={};return e.on=function(e,n,r){t.push({eventName:e,callback:n,priority:r||1e3})},e.off=function(e,n){var r=t.filter(function(t){return t.eventName===e&&t.callback===n})[0];t.splice(t.indexOf(r),1)},e.once=function(n,r,i){t.push({eventName:n,callback:function(){r.apply(null,arguments),e.off(n,r)},priority:i||1e3})},e.need=function(t){var n=cjs.Need();return e.once(t,function(t){n.resolve(t)}),n},e.fire=function(e,n){t.filter(function(t){return t.eventName===e}).sort(function(t,e){return t.priority-e.priority}).forEach(function(t){t.callback(n)})},e.clear=function(){t.length=0},e}cjs.bus={},cjs.bus.addBus=function(e){cjs.bus[e]=t()},cjs.bus.removeBus=function(t){cjs.bus[t].clear(),delete cjs.bus[t]}}(),cjs.navigator={},function(obj){var packages=cjs.Collection(),imports=function(t){return packages.get(t)||createPackage(t)},getPackage=function(t){return packages.get(t).pack},importer={js:function(o,imported,pack){eval("imported = "+o.response.response);var needs=cjs.Need([]),total=0,importer=function(t){total++,needs.add(imports(t))};imported(importer),0===total?(pack.pack=imported(),pack.resolve(pack.pack)):needs.done(function(){pack.pack=imported(getPackage),pack.resolve(pack.pack)})},json:function(t,e,n){n.pack=t.toJSON(),n.resolve(t.toJSON())},text:function(t,e,n){n.pack=t.getResponseText(),n.resolve(t.getResponseText())}},createPackage=function(t){var e,n=cjs.Need();return packages.add(n,t),obj.get(t).done(function(r){var i=t.substr(t.lastIndexOf(".")+1);i="js"===i||"json"===i?i:"text",importer[i](r,e,n)}),n};obj.send=function(t,e,n){n=n||{};var r=cjs.Need(),i=getHttpObject();return i.open(t,e,1),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.overrideMimeType&&i.overrideMimeType(n.overrideMimeType),i.onreadystatechange=function(){200===i.status&&4===i.readyState?r.resolve(Response(i)):200!==i.status&&4===i.readyState&&r.reject(i)},i.send(),r},obj.get=function(t,e){return obj.send("GET",t,e||{})},obj.post=function(t,e){return obj.send("POST",t,e||{})},obj.put=function(t,e){return obj.send("PUT",t,e||{})},obj["delete"]=function(t,e){return obj.send("DELETE",t,e||{})},obj.fileLength=function(t){var e=cjs.Need(),n=new XMLHttpRequest;return n.open("HEAD",t,!0),n.onreadystatechange=function(){this.readyState===this.DONE&&e.resolve(parseInt(n.getResponseHeader("Content-Length")))},n.send(),e},obj["import"]=function(t){return imports(t)};var Response=function(){var t={toJSON:function(){return JSON.parse(this.response.responseText)},getResponseText:function(){return this.response.responseText}};return function(e){return cjs.Object.extend({response:e},t)}}(),getHttpObject=function(){return window.ActiveXObject?new ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest},getScreenOrientation=function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"},getBrowserInfo=function(t){if(t.match(/(OPR)[^\d]\d*.\d*/))return["","opera",t.match(/OPR[^\d](\d*.\d*)/)[1]];if(t.match(/(Chrome)\/(\d*\.\d*)/))return t.match(/(Chrome)\/(\d*\.\d*)/);if(t.match(/(Firefox)\/(\d*\.\d*)/))return t.match(/(Firefox)\/(\d*\.\d*)/);if(t.match(/(Safari)\/(\d*\.\d*)/)){var e=t.match(/(Version)\/(\d*\.\d*)/);return e[1]="Safari",e}if(t.match(/Trident\/(\d)/)){var n=Number(t.match(/Trident\/(\d)/)[1])+4;return["","IE",n.toString()]}return["","",""]},getOsInfo=function(t){var e=["",""];return t.match(/WOW64/)?(e[0]="windows",t.match(/Windows NT 6/)&&(e[1]="7")):t.match(/Macintosh/)?(e[0]="Macintosh",e[1]=t.match(/Mac OS X (\d*[^\d]\d*)/)[1].replace("_",".")):t.match(/Linux/)&&(e=["Linux","UNKNOWN"]),e};obj.deviceManager=function(t){var e=t.userAgent,n={};n.deviceType="desktop";var r=getOsInfo(e);n.os=r[0],n.osVersion=r[1];var i=getBrowserInfo(e);return n.browserName=i[1].toLowerCase(),n.browserVersion=i[2],n.getScreenOrientation=getScreenOrientation,n},obj.screenManager=function(t){function e(e,n){return window.innerWidth>window.innerHeight||!t.rotateOnPortrait?e:n}function n(t){return e("scale3d("+t+","+t+",1)","scale3d("+t+","+t+",1) rotate3d(0,0,1,90deg)")}function r(t,n){var r=window.innerWidth,i=window.innerHeight,o=t/n,a=r/i,c=r/t,s=r/n,u=a>o?i/n:c,f=s>i/t?i/t:s;return e(u,f)}function i(t){return t.get()instanceof HTMLCanvasElement}function o(){var o=window.innerWidth,a=window.innerHeight,l=r(t.width,t.height);c.forEach(function(t){t.node.addStyle({position:"absolute",width:t.width+"px",height:t.height+"px",transform:n(r(t.width,t.height)),"transform-origin":"50% 50% 0",left:-((t.width-o)/2)+"px",top:-((t.height-a)/2)+"px"})}),s.forEach(function(t){t.node.addStyle({position:"absolute",height:"1px",width:e(o/l+"px",a/l+"px"),transform:n(l),"transform-origin":"0% 0% 0",top:e("0px","0px"),left:e("0px","auto"),right:e("auto",-a/l+"px")})}),u.forEach(function(t){t.node.addStyle({position:"absolute",height:"1px",width:e(o/l+"px",a/l+"px"),transform:n(l),"transform-origin":"0% 0% 0",bottom:e("0px",a+"px"),left:e("0px","0px")})}),f.forEach(function(r){r.node.addStyle({position:"absolute",width:"1px",height:t.height+"px",transform:n(l),"transform-origin":"50% 50% 0",right:e("0px",o/2+"px"),top:e((a-t.height)/2+"px",a-t.height/2+"px")})}),h.forEach(function(e){if(i(e.node)){e.node.addStyle({position:"relative",width:"100%",height:"100%",top:0});var n=t.width/t.height,r=o/a;r>n?(e.node.get().width=o/(a/t.height),e.node.get().height=t.height):(e.node.get().width=t.width,e.node.get().height=a/(o/t.width))}})}var a={},c=[],s=[],u=[],f=[],h=[];return a.centered=function(t){c.push({node:t.node,width:t.width,height:t.height}),o()},a.top=function(t){s.push({node:t.node}),o()},a.bottom=function(t){u.push({node:t.node}),o()},a.right=function(t){f.push({node:t.node}),o()},window.onresize=o,t.canvas&&h.push({node:cjs.Node(t.canvas)}),o(),a},obj.fileLoader=function(){function t(t){return o.filter(function(e){return e.url===t.url})[0]}function e(t,e,n){var o=cjs.Need(),a=cjs.Need("<img>"),c=n,s=(new Date).getTime(),u=setInterval(function(){var t=.3*i;c>t&&(c-=t,e(t))},100);return a.setAttribute("src",t).addOnceEventListener("load",function(t){clearInterval(u),r(s,(new Date).getTime(),n),e(c),a=null,o.resolve(t)}).addOnceEventListener("error",function(t){clearInterval(u),o.resolve({})}),o.promise()}function n(t,n){var r=[],i=0,o=0;return t.forEach(function(t){t.size=isNaN(t.size)?0:t.size,i+=t.size,o+=t.loaded}),t.forEach(function(t){r.push(e(t.url,function(e){t.loaded=e,o+=e,n(o,i)},t.size))}),cjs.Need(r)}function r(t,e,n){i=n/((e-t)/1e3)}var i,o=[],a={};return a.load=function(e,r){var i=[];return e.forEach(function(e){t(e)||i.push(e)}),r=r||function(){},r(1,100),n(i,r)},a.calculateSpeed=function(t,e){var n=cjs.Need(),i=(new Date).getTime();return cjs.Node("<img>").setAttribute("src",t).addOnceListener("load",function(){r(i,(new Date).getTime(),e),n.resolve()}),n.promise()},a}}(cjs.navigator),function(){cjs.Db=function(){return{onChange:function(){}}},cjs.Db.firebaseAdapter=function(){var t,e={};return e.once=function(e,n){t.ref(e).once("value").then(n)},e.onChange=function(e,n){var r=cjs.Need();return t.ref(e).on("value",function(t){n(t.val()),r.resolve()}),r},e.onRemove=function(e,n){t.ref(e).on("child_removed",n)},e.get=function(e){return t.ref().child(e)},e.remove=function(e){t.ref(e).remove()},e.add=function(e,n){var r=t.ref(e).push();return n.created=(new Date).getTime(),r.set(n),r.key},e.update=function(e,n){var r=t.ref(e);return n.modified=(new Date).getTime(),r.set(n)},e.off=function(e){t.ref(e).off()},e.login=function(t,e){var n=cjs.Need();return firebase.auth().signInWithEmailAndPassword(t,e).then(n.resolve)["catch"](n.reject),n},e.init=function(e){firebase.initializeApp(e),t=firebase.database()},e},cjs.Db.staticJSONAdapter=function(t){var e,n={};return n.once=function(e,n){var r=t[e.replace("/","")],i={};r.forEach(function(t,e){i[e]=t}),n({val:function(){return i},exportVal:function(){return i}})},n.onChange=function(n,r){e=r;var i=n.split("/"),o=t;i.forEach(function(t){o=o[t]}),r(o)},n.onRemove=function(t,e){},n.get=function(t){return json[t.replace("/","")]},n.remove=function(t){},n.add=function(t,e){var n=json[t.replace("/","")];return n.push(e),n.length-1},n.update=function(t,e){},n.off=function(t){},n.login=function(){return cjs.Need().resolve()},n.init=function(){},n}}(),cjs.Component=function(){function t(t,e){var r=e.getAttribute("data-parser");r&&n[r]?n[r](t,e):!r&&n[r]&&console.error("missing parsing function")}var e={},n={},r=[],i=cjs.Db();cjs.bus.addBus("bindings");var o=[],a=0,c=function(){var e={},n=[];return e.add=function(t,e){n.push({item:t,attribute:e})},e.collect=function(){var e=cjs.Need([]);return n.forEach(function(n){if(!n.item.__isCollect){n.item.__isCollect=!0;var r=cjs.Need();e.add(r),i.onChange(n.attribute,function(e){n.item.setValue(e),t(e,n.item),r.resolve()})}}),0===e.size()&&e.add(cjs.Need().resolve()),e},e.forEach=function(t){n.forEach(t)},e.off=function(t){i.off(t)},e.save=function(t){var n=e.get(t);return cjs.navigator.send("POST","/data/"+n.attribute)},e.get=function(t){var e=n.filter(function(e){return e.item.get()===t.get()});return e?e[0]:null},e}(),s=function(t,e,n){t.trim().split(",").forEach(function(t){var r=t.trim().split(":");e.addListener(r[0],function(t){n[r[1]].call(n,t)})})},u=function(t,e,n){n.items.add(e,t)},f=function(t,e){c.add(e,t)},h=function(t,e){cjs.bus.bindings.on(t,function(t){e.setValue(t)})},l=["data-on","data-item","data-bind","data-server"],d=function(t,e,n){var r=t.getAttribute(n);r&&-1!==l.indexOf(n)&&("data-on"===n&&s(r,t,e),"data-item"===n&&u(r,t,e),"data-bind"===n&&h(r,t,e),"data-server"===n&&f(r,t,e),t.setAttribute(n))},p=function(t,e){if(t.getTagName()){var n=t.getTagName().match(/CJS:(.*)/);if(n){var r=j.get(n[1].toCamelCase()),i=t.toJSON(),o=cjs.Object.extend({},i,r.config),a=j({template:t.get().innerHTML?y(r.template,cjs.Object.extend({},i,r.config)):r.template,style:t.get().innerHTML?v(r.style,o):r.style,config:r.config},r.controller(o));a.createIn(t.get(),"before");for(var c=0;c<t.attributes().length;c++){var s=t.attributes()[c];"class"!==s.name&&a.node.setAttribute(s.name,s.value)}return a.node.addStyle(t.get().className),e.items.add(a,t.getAttribute("data-id")),t.get().parentNode.removeChild(t.get()),a.node}}return null},g=function(t,e){t.children().forEach(function(t){g(t,e)}),t=p(t,e)||t,l.forEach(function(n){d(t,e,n)})},m=function(t){function e(t,e,n,r){"insertRule"in t?t.insertRule(e+"{"+n+"}",r):"addRule"in t&&t.addRule(e,n,r)}var n=0;t=t.replace(/\n/g,"");var i=r.filter(function(e){return e.style===t});if(i.length>0)var o=i[0].className;else{var o="CJS"+a++,c="."+o,s=function(){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet}(),u=t.split("}");u.splice(u.length-1,1),u=u.map(function(t){return t+"}"});for(var f=0;f!==u.length;)-1!==u[f].indexOf("@keyframes")?(u[f]+=u.splice(f+1,1)[0],"}"===u[f+1]&&(u[f]+=u.splice(f+1,1)[0],f++)):f++;u.forEach(function(t){var r=t.match(/.*\{.*\}/);r&&r.forEach(function(t){var r,i=t.trim().match(/(.*)\{(.*)\}/);i[1].match(/\.&/)?r=i[1].replace(/\.&/g,c):i[1].match("@keyframes")&&(r=i[1].replace(/-&/g,c.replace(".","-"))),i&&e(s,r,i[2],n++)})}),r.push({className:o,style:t})}return o},v=function(t,n){var r=t.match(/\$\w*/g);return r&&r.forEach(function(e){e=e.replace("$",""),t=t.replace(new RegExp("\\$"+e,"g"),n[e]||"")}),Object.keys(e).forEach(function(n){if(r=t.match(new RegExp(n+"\\((.*)\\)"))||[],r[1])for(;r[1];)t=t.replace(r[0],e[n](r[1])),r=t.match(new RegExp(n+"\\((.*)\\)"))||[]}),t},y=function(t,e){for(var n=t.match(/\{\{\w*\}\}/g);n;)n.forEach(function(n){n=n.replace("{{","").replace("}}",""),t=t.replace(new RegExp("\\{\\{"+n+"\\}\\}","g"),e[n]||"")}),n=t.match(/\{\{\w*\}\}/g);return t},b={},j=function(t,e){function n(t){return t instanceof HTMLElement?t:"string"==typeof t?cjs.Node(t).get():t.get()}var r,i=t.config||{},o=v(t.style||"",i),a=y(t.template||"",i),s="";return e=e||{},e.items=cjs.Collection(),e.template=a,e.style=o,e.config=i,e.createIn=function(t,i){t instanceof cjs.NodeCanvas?(r=e.node=new cjs.NodeCanvas(t.getCtx(),a),o&&(s=m(o),r.addStyle(s))):(r=e.node=cjs.Node(a),t=n(t),i?("before"===i&&t.parentNode.insertBefore(r.get(),t),"after"===i&&t.parentNode.insertBefore(r.get(),t.nextSibling)):t.appendChild(r.get(0)),o&&(s=m(o),r.addStyle(s)),r&&g(r,e)),e.init&&e.init()},e.get=function(t){return e.items.get(t)||e.node},e.getClassName=function(){return s},e.runAnimation=function(t,n){return e.get(n.item).runAnimation(t+"-"+s,n)},e.save=function(){var t=[];return function e(n){c.get(n)&&t.push(c.save(n)),n.children().forEach(e)}(r),cjs.Need(t)},e.toJSON=function(){var t={};return e.items.each(function(e,n,r){t[n]=r.getValue()}),t},e.remove=function(){e.node.clearListeners(),e.items.each(function(t,e,n){var r=n.get()instanceof HTMLElement?n:n.get();r.clearListeners()}),c.forEach(function(t,n){e.get()===t.item&&c.off(t.attribute),e.items.indexOf(t.item)&&c.off(t.attribute)});var t=e.node.get().parentNode;t.removeChild(e.node.get())},cjs.Object.extend(e,b),e};return j.extend=function(t){cjs.Object.extend(b,t)},j.register=function(t){t.controller=t.controller||function(){return{}},o.push(t)},j.injectDatabaseProxy=function(t){i=t},j.collectData=function(){return c.collect()},j.get=function(t){return o.filter(function(e){return e.name===t})[0]},j.create=function(t,e){var n=cjs.Component.get(t),r=cjs.Object.extend(e.config||{},n.config),i=e.controller?e.controller(r):n.controller(r);return cjs.Component({config:r,template:n.template,style:n.style},i)},j.registerStyleFunction=function(t,n){e[t]=n},j.registerParserFunction=function(t,e){n[t]=e},j.parse=function(t,e,r){return n[t](e,r)},j.getStyle=function(t){return r.filter(function(e){return e.className===t;
})[0].style},j}(),cjs.Audio=function(){var t={},e={name:{url:""}},n={},r=!1;return t.init=function(t){e=t,Object.keys(e).forEach(function(t){n[t]=new Audio(e[t].url)})},t.play=function(t){var i=e[t];i&&!r&&n[t].play()},t.stop=function(t){n[t].pause(),n[t].currentTime=0},t.mute=function(){r=!0},t.unmute=function(){r=!1},t};