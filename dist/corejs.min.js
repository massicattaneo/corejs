/**
 * corejs - Javascript Framework
 * @version v1.0.0
 * @link https://github.com/massicattaneo/corejs#readme
 * @license ISC
 * @author Massimiliano Cattaneo
 */
Array.prototype.fillWithIndexes=function(t,e){e=e||0;for(var n=0;t-e>=n;n++)this[n]=n+e;return this},Array.prototype.clone=function(){return this.slice(0)},String.prototype.replaceAt=function(t,e,n){return this.substr(0,t)+n+this.substr(t+e)},String.prototype.insertAt=function(t,e){return this.substr(0,t)+e+this.substr(t)},String.prototype.removeAt=function(t,e){return e="undefined"==typeof e?1:e,this.substr(0,t)+this.substr(t+e)},String.prototype.padLeft=function(t,e){return 0===t?"":(Array(t+1).join(e)+this).slice(-t)},String.prototype.padRight=function(t,e){return 0===t?"":(this+Array(t+1).join(e)).slice(0,t)},String.prototype.removeHTMLTags=function(){return this.replace(/<\/?[^>]+(>|$)/g,"")},String.prototype.startsWith=function(t){return this.substr(0,t.length)===t},String.prototype.highlightWord=function(t,e,n){e=e||"strong";var r=new RegExp("("+t+")","gi");return strClass=n?' class="'+n+'"':"",this.replace(r,"<"+e+strClass+">$1</"+e+">")},String.prototype.isTime=function(){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(this)},String.prototype.isDate=function(){var t=-1!==this.indexOf("-")?"-":"/",e=this.split(t);if(e.join("-").length<10)return!1;var n=new Date(e.join("-"));return/Invalid|NaN/.test(n.toString())?!1:n.getDate()!==parseInt(e[2],10)?!1:n.getFullYear()===parseInt(e[0],10)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toString().toLowerCase()},String.prototype.toDate=function(){if(!isNaN(this))return new Date(parseInt(this));var t=this.split(this.match(/\D/));return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10))},Object.prototype.extend=function(){for(var t=this,e=0,n=arguments.length;n>e;e++){var r=arguments[e];Object.keys(r).forEach(function(e){t[e]=r[e]})}return this},Object.prototype.clone=function(){return Object.extend(this)},Element.prototype.addClass=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t].trim();this.className?this.className.match(e)||(this.className+=" "+e):this.className=e}return this},Element.prototype.clearClass=function(){return this.className="",this},Element.prototype.removeClass=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t].trim();this.className.match(e)&&(this.className=this.className.replace(e,"").replace(/\s\s/g," ").trim())}return this},Element.prototype.hasClass=function(t){return this.className.match(t)},Element.prototype.toggleClass=function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t),this},Element.prototype.addListener=function(t,e){this._listeners=this._listeners||[],this._listeners.push({action:t,callback:e}),this.addEventListener?this.addEventListener(t,e):this.attachEvent("on"+t,e)},Element.prototype.removeListener=function(t,e){this.removeEventListener?this.removeEventListener(t,e):this.detachEvent("on"+t,e)},Element.prototype.resetListeners=function(){this._listeners&&this._listeners.forEach(function(t){this.removeListener(t.action,t.callback)},this)},Event.prototype.getTarget=function(){var t=this||window.event;return t.target||t.srcElement},Element.prototype.setInnerText=function(t){return this.textContent=t,this.innerText=t,this},Element.prototype.fire=function(t,e){if(document.action){var n=document.createEventObject();return n.data=e,this.fireEvent("on"+t,n)}var r=document.createEvent("HTMLEvents");return r.initEvent(t,!0,!0),r.data=e,!this.dispatchEvent(r)};var Collection=function(){var t=function(t,e,n){var r=[];t.forEach(function(n,i){r.push({a1:t[i],a2:e[i]})}),r.sort(function(t,e){return n?t.a1>e.a1?-1:t.a1===e.a1?0:1:t.a1<e.a1?-1:t.a1===e.a1?0:1}),r.forEach(function(n,r){t[r]=n.a1,e[r]=n.a2})},e=function(t,e,n){var r=t.splice(n,1,t[e]);t[e]=r[0]},n={VERSUS:{ascending:0,descending:1},initValues:function(){this.items=[],this.keys=[],this.__counterId=0},size:function(){return this.items.length},isEmpty:function(){return 0===this.size()},add:function(t,e){var n="undefined"==typeof e?this.__counterId++:e;return this.keys.push(n),this.items.push(t),n},sortByItem:function(e){t(this.items,this.keys,e)},sortByKey:function(e){t(this.keys,this.items,e)},sortBy:function(e,n){var r=[],i=[];this.forEach(function(t){r.push(t[e]),i.push(t[e])}),t(r,this.keys,n),t(i,this.items,n)},newItem:function(t){var e=new this.ClassType;return this.add(e,t),e},get:function(t){return this.items[this.keys.indexOf(t)]},getAt:function(t){return this.items[t]},getKeyAt:function(t){return this.keys[t]},set:function(t,e){var n=this.keys.indexOf(t);return this.items[n]=e,n},setAt:function(t,e){return this.items[t]=e,this.keys[t]},setKey:function(t,e){var n=this.keys.indexOf(t);return this.keys[n]=e,n},getLast:function(t){return this.items[this.keys.lastIndexOf(t)]},swap:function(t,n){e(this.items,t,n),e(this.keys,t,n)},getCollection:function(t,e){var n=Collection();return this.forEach(function(r,i){r[t]===e&&n.add(r,i)}),n},indexOf:function(t){return this.items.indexOf(t)},addCollection:function(t){t.forEach(function(t,e){this.add(t,e)},this)},remove:function(t){var e,n=0;do n=this.keys.indexOf(t),-1!==n&&(this.keys.splice(n,1),e=this.items.splice(n,1));while(-1!==n);return e[0]||null},removeAt:function(t){return this.keys.splice(t,1),this.items.splice(t,1)[0]},removeItem:function(t){var e=this.indexOf(t),n=this.keys[e];return this.remove(n)},filter:function(t){var e=Collection();return this.forEach(function(n,r){"undefined"!=typeof t&&r!==t||e.add(n,r)}),e},clone:function(){return this.filter()},forEach:function(t,e){for(var n=0;n<this.items.length;n++)t.call(e||this,this.items[n],this.keys[n],parseInt(n,10))},clear:function(){this.items=[],this.keys=[]},toArray:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},toJSON:function(){var t={};return this.forEach(function(e,n){t[n]=e}),t}};return function(t){var e={};return e.extend(n),e.initValues(),Array.isArray(t)?t.forEach(function(t){e.add(t)}):e.ClassType=t,e}}(),Need=function(){var t={WAIT:0,DONE:1,FAIL:2},e=function(t,e,n){t.returnData[e]=n,t.status=e,t.collection.filter(e).forEach(function(e){e(n,t.id)})},n=function(t,e,n){t.status===e?n(t.returnData[e],t.id):t.collection.add(n,e)},r=function(){var r={},i={returnData:[],status:t.WAIT,id:-1,collection:Collection()};return r.resolve=function(n){i.status===t.WAIT&&e(i,t.DONE,n)},r.fail=function(n){return e(i,t.FAIL,n),r},r.then=function(e){return n(i,t.DONE,e),r},r.onFail=function(e){n(i,t.FAIL,e)},r.status=function(){return i.status},r.setId=function(t){i.id=t},r},i=function(e){var n=e.errors;return e.status===t.DONE&&(n=e.args.slice(0)),n},s=function(e,n,r){r.status===e?n.apply(null,i(r)):e===t.DONE?r.done.push(n):r.fail=n},o=function(e){var n={},r={done:[],fail:function(){},args:[],errors:[],count:0,counter:0,status:t.WAIT,collection:Collection()};return n.add=function(t){return t.setId(r.counter++),r.collection.add(t),t.then(function(t,e){n.itemOnDone(t,e)}),t.onFail(function(t){n.itemOnFail(t)}),this},n.itemOnDone=function(e,n){r.count+=1,r.args[n]=e,r.count===r.collection.size()&&(r.status=t.DONE,r.done.forEach(function(t){t.apply(this,i(r))}))},n.itemOnFail=function(e){r.errors.push(e),r.status=t.FAIL,r.fail.apply(this,i(r))},n.then=function(e){s(t.DONE,e,r)},n.onFail=function(e){s(t.FAIL,e,r)},n.get=function(t){return r.collection.get(t)},n.status=function(){return r.status},e.forEach(function(t){n.add(t)}),n},a=function(t){var e={},n=-1,r=function(){t.length=0,n=-1},i=function(s){n+=1,t.length>n?t[n](e,s).then(i).onFail(r):r()};return e.start=function(t){i(t)},e.push=function(e){t.push(e)},e.isRunning=function(){return-1!==n},e};return function(t){if(void 0===t)return r();if(Array.isArray(t)){if("object"==typeof t[0]||void 0===t[0])return o(t);if("function"==typeof t[0])return a(t)}}}();!function(obj){var packages=Collection(),getPackageNeed=function(t){return packages.get(t)||createPackage(t)},getPackage=function(t){return packages.get(t).pack},createPackage=function(url){var pack=Need(),imported;return packages.add(pack,url),obj.get(url+".js").then(function(o){eval("imported = "+o.response.response);var needs=Need([]),total=0,importer=function(t){total++,needs.add(getPackageNeed(t))};imported(importer),0===total?(pack.pack=imported(),pack.resolve(pack.pack)):needs.then(function(){pack.pack=imported(getPackage),pack.resolve(pack.pack)})}),pack};obj.send=function(t,e,n){n=n||{};var r=Need(),i=getHttpObject();return i.open(t,e,1),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.overrideMimeType&&i.overrideMimeType(n.overrideMimeType),i.onreadystatechange=function(){200===i.status&&4===i.readyState?r.resolve(Response(i)):200!==i.status&&4===i.readyState&&r.fail(i)},i.send(),r},obj.get=function(t,e){return obj.send("GET",t,e||{})},obj.post=function(t,e){return obj.send("POST",t,e||{})},obj.put=function(t,e){return obj.send("PUT",t,e||{})},obj["delete"]=function(t,e){return obj.send("DELETE",t,e||{})},obj["import"]=function(t){return getPackageNeed(t)};var Response=function(){var t={toJSON:function(){return JSON.parse(this.response.responseText)},getResponseText:function(){return this.response.responseText}};return function(e){return{response:e}.extend(t)}}(),getHttpObject=function(){return window.ActiveXObject?new ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest}}(navigator);var Component=function(){function t(t,e,n){var r=t.trim().split(":"),i=r[0].split(","),s=r[1];i.forEach(function(t){e.addListener(t,function(t){n[s].call(n,t)})})}var e=[],n=function(t,e,n){var r=t;n.split("/").forEach(function(t){r=r[t]}),e.setInnerText(r)},r=[],i=0,s=function(){var t={},e=[];return t.add=function(t,n){e.push({item:t,attribute:n})},t.collect=function(){e.forEach(function(t){navigator.send("GET","/data/"+t.attribute).then(function(e){n(e.toJSON(),t.item,t.attribute)})})},t.save=function(t){var e=this.get(t);return navigator.send("POST","/data/"+e.attribute)},t.get=function(t){var n=e.filter(function(e){return e.item===t});return n?n[0]:null},t}(),o=function(t){var e=document.implementation.createHTMLDocument("");return e.body.innerHTML=t,e.body.childNodes[0]},a=function(t,e,n){n.items.add(e,t)},u=function(t,e,n){s.add(e,t)},c=function(e,n,r){if(e.getAttribute){var i=e.getAttribute(r);i&&("data-on"===r&&t(i,e,n),"data-item"===r&&a(i,e,n),"data-bind"===r&&u(i,e,n))}},f=function(t,e){if(t.tagName){var n=t.tagName.match(/COREJS:(.*)/);if(n){var r=p.get(n[1]),i=p(r.template,r.style).extend(r.controller);i.createIn(t,"before");for(var s=0;s<t.attributes.length;s++){var o=t.attributes[s];"class"!==o.name&&i.node.setAttribute(o.name,o.value)}return i.node.addClass(t.className),e.items.add(i,t.getAttribute("data-id")),t.parentNode.removeChild(t),i.node}}return null},l=function(t,e){var n=Array.prototype.slice.call(t.childNodes);n.forEach(function(t){l(t,e)}),t=f(t,e)||t,c(t,e,"data-on"),c(t,e,"data-item"),c(t,e,"data-bind")},h=function(t){var n=e.filter(function(e){return e.style===t});if(n.length>0)var r=n[0].className;else{var r="CJS"+i++,s="."+r,o=function(){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet}();t.split("}").forEach(function(t){var e=t.concat("}").match(/.*\{.*\}/);e&&e.forEach(function(t){var e=t.trim().match(/(.*)\{(.*)\}/);e&&o.addRule(s+" "+e[1],e[2])})}),e.push({className:r,style:t})}return r},p=function(t,e){var n=o(t),r={items:Collection(),template:t,style:e,node:n};return r.createIn=function(t,i){i?("before"===i&&t.parentNode.insertBefore(n,t),"after"===i&&t.parentNode.insertBefore(n,t.nextSibling)):t.appendChild(n),n&&l(n,r),e&&n.addClass(h(e)),r.init&&r.init(),s.collect()},r.get=function(t){return r.items.get(t)},r.save=function(){var t=[];return function e(n){s.get(n)&&t.push(s.save(n)),Array.prototype.slice.call(n.childNodes).forEach(e)}(r.node),Need(t)},r};return p.register=function(t,e,n,i){e.template=n,e.style=i,r.push({name:t,controller:e,template:n,style:i})},p.get=function(t){return r.filter(function(e){return e.name.toUpperCase()===t.toUpperCase()})[0]},p}();