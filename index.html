<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test page</title>
</head>
<body>

<script src="js/String/String.js"></script>
<script src="js/Object/Object.js"></script>
<script src="js/Element/Element.js"></script>
<script src="js/Collection/Collection.js"></script>
<script src="js/Need/Need.js"></script>
<script src="js/Component/Component.js"></script>
<script src="js/navigator/navigator.js"></script>

<script>
    var validate = function (string, disabled) {
        if (string === "" || disabled) {
            return {isValid: false, message: ":fieldEmpty", class: "invalid"}
        } else {
            return {isValid: true, message: ":fieldValid", class: "valid"}
        }
    };

    var inputController = function () {
        var obj = {};
        var disabled = false;

        obj.check = function () {
            var check = validate(this.get('input').value, disabled);
            this.get('error')
                    .clearClass()
                    .addClass(check.class)
                    .setInnerText(check.message);
            return check.isValid || disabled;
        };
        obj.disable = function () {
            disabled = true;
            this.get('input').setAttribute('disabled', 'disabled');
            this.get('error').clearClass().setInnerText('');
        };
        obj.enable = function () {
            disabled = false;
            this.get('input').removeAttribute('disabled');
        };

        return obj;
    };

    Component.register('input', inputController(), '<div><input data-item="input" type="text" data-on="keyup:check" /><span data-item="error"></span></div>', 'span.invalid {color: red;} span{color:green;}');
    Component.register('check', {
        change: function (e) {
            e.getTarget().fire('custom', {value: e.getTarget().checked});
        }
    }, '<div><input type="checkbox" data-on="change:change" data-item="checkbox" /></div>');
    var c = Component('<div><corejs:check data-id="c1" data-on="custom:toggleCheckbox"></corejs:check><corejs:input class="input" id="comp1" data-id="c2" ></corejs:input><input type="submit" data-on="click:submit" /></div>',
            'div {display:inline-block} input[type=submit] {color: white; display: block; margin-top: 10px}');

    c.toggleCheckbox = function (e) {
        (e.data.value) ? c.get('c2').disable() : c.get('c2').enable();
    };
    c.createIn(document.body);
    c.submit = function () {
        if (c.get('c2').check()) {
            alert('submit');
        }
    };

</script>

<div>
    <span class="valid">TEST</span>
</div>

</body>
</html>